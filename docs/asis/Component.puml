@startuml
title SmartHomeSystem Web Application Component Diagram

top to bottom direction

'!include ./C4_Component.puml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Component.puml

Person(user, "User", "A user of the SmartHome system")
Person(admin, "Admin", "Administrator of the SmartHome system")

Container_Boundary(SmartHomeSystem, "SmartHome System") {
  Container(WebApp, "Web Application", "Java", "Handles user interactions")
  Container(Database, "Database", "PostgreSQL", "Stores sensor's data and current setup")
}

Container(WebApp, "Web Application", "Java") {
  Component(HeatingSystemController, "HeatingSystem Controller", "Handles heating system status and temp")
  Component(HeatingSystemService, "Service Layer", "Business logic (Update entity, set temp, get current temp")
  Component(BackgroundHeatingSystemProcessor, "Background Heating System Processor", "Maintaining a set temperature in users' homes")
  Component(RepositoryLayer, "Repository Layer", "Data access logic")
}

Rel(user,HeatingSystemController,"On/off heating system\n set temp\n get current temp")
Rel(admin,HeatingSystemController,"Register/update user's heating home system")
Rel(HeatingSystemController,HeatingSystemService,"Calls business logic")

Rel(BackgroundHeatingSystemProcessor,RepositoryLayer,"Reads/Writes data")
Rel(HeatingSystemService,RepositoryLayer,"Reads/Writes data")
Rel(RepositoryLayer,Database,"Reads/Writes heating system data")
@enduml