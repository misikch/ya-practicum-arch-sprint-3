_format_version: "2.1"
services:
  - name: device-manager
    url: http://device-manager:8081
    routes:
      - name: device-manager-route
        paths:
          - /devices
        methods:
          - GET
          - POST
          - PUT

  - name: telemetry-service
    url: http://telemetry-service:8082
    routes:
      - name: telemetry-service-route
        paths:
          - /devices/{device_id}/telemetry
        methods:
          - GET
          - POST

      - name: latest-telemetry-route
        paths:
          - /devices/{device_id}/telemetry/latest
        methods:
          - GET

plugins:
  - name: cors
    config:
      origins: ["*"]
      methods: ["GET", "POST", "PUT"]
